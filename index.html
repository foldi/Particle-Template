<!doctype html>
<html>
	<head>
		<title>js</title>
		<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
		<meta name="viewport" content = "user-scalable=no, width=device-width, initial-scale=1.0; maximum-scale=1.0;" />
		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
		<meta name="keywords" content="" >
		<meta name="description" content="" >
		
		<link rel="stylesheet" type="text/css" href="css/main.css" />
		
		<script type="text/javascript" src="js/pvector.min.js"></script>
		<script type="text/javascript" src="js/main.js"></script>
		<script type="text/javascript" src="js/World.js"></script>
		<script type="text/javascript" src="js/ParticleSystem.js"></script>
		<script type="text/javascript" src="js/Particle.js"></script>
		<script type="text/javascript" src="js/Stats.js"></script>
		<script type="text/javascript" src="js/dat.gui.min.js"></script>
		
		<script type="text/javascript">
		
			var ready = function () {
				
				world = new World();
				
				ps = new ParticleSystem({
					mass: 30,
					color: [255, 0, 0],
					opacity: 0.75,
					width: 10,
					height: 10,
					view: function () {
						var myDiv;
						myDiv = document.createElement("div"); // create element
				    myDiv.className = "particle";
				    myDiv.style.webkitTransform = 'translateX(-5000px) translateY(-5000px) translateZ(0) scaleX(1) scaleY(1)';
						return myDiv;
					}
				});
				
				world.start();
				ps.start();
	
				//
				
				var gui = new dat.GUI();
			  gui.add(ps, 'burst', -10, 10).step(1);
				gui.add(ps, 'scale', 0, 10).step(.1);
				gui.add(ps, 'opacity', 0, 1).step(.1);
				gui.add(ps, 'lifeMax', 1, 100).step(1);
				gui.add(ps, 'width', 1, 100).step(1);
				gui.add(ps, 'height', 1, 100).step(1);
				gui.add(ps, 'mass', 1, 100).step(1);
				gui.add(ps, 'colorMode', ['rgb', 'hsv']);
				gui.addColor(ps, 'color');
				
				// !! need to control gravity, wind and world framerate
				
				//
				
				document.addEventListener("keyup", function (e) {
				
					switch (e.keyCode) {
						case 32: // "space": toggles world step
							if (world.interval) {
								world.stop();
							} else {
								App.world.start();
							}
							break;
						case 80: // "p": toggles particle system step
							if (ps.interval) {
								ps.stop();
							} else {
								ps.start();
							}
							break;							
						case 83: // "S"
							if (typeof stats !== "undefined") {
								destroyStats();
							} else {
								createStats();
							}
							break;
					}
				}, false);
				
			};
		</script>
		
	</head>
	<body onload="javascript:ready()"></body>
</html>